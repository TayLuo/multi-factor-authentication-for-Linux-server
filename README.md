# Multi-Factor-Authentication-for-Linux-server

Multi-factor authentication is a method of confirming your identity using at least two different ways of authentication. The most common and easiest to implement example of two-factor authentication uses a combination of passphrase and one-time-passcode generated by a special mobile app.

I will use the Google Authenticator app available for Android (in the Play Store) and iOS (in iTunes) to generate authentication codes. I will provide step by step instructions on how to set up two factor authentication with Google Authenticator.

prerequisite: 

  [Azure Accout](https://azure.microsoft.com/en-us/get-started/azure-portal)

  [Smartphone with Google Authenticator app installed](https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en_US&pli=1)


Here are the steps: 
  1. Install OpenSSH Server

    	  	sudo apt update -y

   <p align="center"> </p> 
<img src="https://imgur.com/aNlhVGs.png" height="80%" width="80%" >
<br />
  2. Installing and configuring required packages

		sudo apt install libpam-google-authenticator
  
   <p align="center"> </p> 
<img src="https://imgur.com/U12MVRX.png" height="80%" width="80%" >
<br />
  3.Configuring SSH, Modify /etc/ssh/sshd_config – change "ChallengeResponseAuthentication from no to yes", and uncomment the line

		sudo vi /etc/ssh/sshd_config 

  		# ChallengeResponseAuthentication yes

<p align="center"> </p>
<img src="https://imgur.com/sQmHPEw.png" height="80%" width="80%" >
<br />
<p align="center"> </p>
<img src="https://imgur.com/9u4OYWA.png" height="80%" width="80%" >
<br />
  4. Start and Enable the OpenSSH Service:


   		sudo systemctl start ssh

   		sudo systemctl enable ssh

 5.verify that the SSH server is running

 		systemctl status ssh

<p align="center"> </p>
<img src="https://imgur.com/pDi2jpp.png" height="80%" width="80%" >
<br />
  6.  In a terminal, run the google-authenticator command

		google-authenticator
  
   <p align="center"> </p> 
<img src="https://imgur.com/2tuxHzd.png" height="80%" width="80%" >
<br />

 7. A QR code will be generated on the terminal after setp 6, use the google authenticator app to scan the code.
   <p align="center"> </p> 
<img src="https://imgur.com/bbIqcnJ.png" height="80%" width="80%" >
<br />

8. It will ask you a series of questions, here is a recommended configuration:

Make tokens “time-base””: yes

Update the .google_authenticator file: yes

Disallow multiple uses: yes

Increase the original generation time limit: no

Enable rate-limiting: yes
